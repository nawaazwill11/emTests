{% extends 'event.html' %}
{% load staticfiles %}

  {% block title %}Search Event{% endblock title %}
	
  {% block sub_sf %}
    <link rel="stylesheet" type="text/css" href="{% static "css/custom/search-event.css" %}">
  {% endblock sub_sf %}

  {% block page_name %}<div style="font-size: 32px; margin-left:-10px">Search Event</div>{% endblock page_name %}

  {% block content %}
    <div class="search-top">
      <div class="sub-title">
        <h1>Search Trip</h1>
      </div>
      <div class="search-belt">
        <div class="search-layer l0">
          <div class="search-op ttl">
            <h3>Refine Search</h3>  
          </div>
        </div>
        <div class="search-layer l1">
          <div class="search-op l1-o1">
            <label>Event Location:</label>
            <select>
              <option>Any</option>
              <option>Venue</option>
              <option>Online</option>
            </select>
          </div>
          <div class="search-op l1-o2" style="flex: 2;">
            <label>Place:</label>
            <input type="text" name="location" placeholder="Eg. Daman, Daman & Diu">
          </div>
          <div class="search-op l1-o3">
            <label>/</label>
            <a href="#">(Locate on Maps)</a>
            <!--<button class="btn btn-success">Locate on maps</button> -->
          </div>
        </div>
      <div class="search-layer l1" style="display: flex;">
          <div class="search-op cat-search" style="flex: 15;">
            <label style="margin-right: 35px;">Type:</label>
            <div class="rad-club">
              <div class="rads" style="flex: 4;">
                <input type="radio" name="cs" value="cs-sel" style="margin-right: 10px;" checked>
                <label style="font-weight: 400">Select</label>
              </div>
              <div class="rads" style="flex: 4;">
                <input type="radio" name="cs" value="cs-sr" style="margin-right: 10px;">
                <label style="font-weight: 400">Search</label>
              </div>
            </div>
          </div>
          <div class="cat-show">
            <div class="gayab-sel" style="margin-left: 22px;"> 
              <select class="selects">
                <option selected disabled>Event Segment</option>
                <option>Any</option>
                <option>Adventure</option>
                <option>Exploring</option>
                <option>Photography</option>
                <option>Sport Events</option>
                <option>Food & Cuisine</option>
                <option>Exercise</option>
                <option>Shopping</option>
                <option>Travel Blogging</option>
                <option>Partying</option>
                <option>Backtracking</option>
              </select> 
              <select class="selects">
                <option selected disabled>Event Category</option>
                <option>Any</option>
                <option>Adventure</option>
                <option>Exploring</option>
                <option>Photography</option>
                <option>Sport Events</option>
                <option>Food & Cuisine</option>
                <option>Exercise</option>
                <option>Shopping</option>
                <option>Travel Blogging</option>
                <option>Partying</option>
                <option>Backtracking</option>
              </select>
              <select class="selects">
                <option selected disabled>Event Segment</option>
                <option>Any</option>
                <option>Adventure</option>
                <option>Exploring</option>
                <option>Photography</option>
                <option>Sport Events</option>
                <option>Food & Cuisine</option>
                <option>Exercise</option>
                <option>Shopping</option>
                <option>Travel Blogging</option>
                <option>Partying</option>
                <option>Backtracking</option>
              </select>
            </div>
            <div class="search-op cat-search">
                <input class="gayab-sr cat-search-input" type="text" name="location" placeholder="Eg. Daman, Daman & Diu">
            </div>
          </div>  
            
      </div> 
        <div class="search-layer l3">
          <div class="search-op l3-o1">
            <label>Start Date:</label>
            <select>
              <option>Any</option>
              <option>2018</option>
              <option>2019</option>
              <option>2020</option>
              <option>2021</option>
              <option>2022</option>
              <option>2023</option>
              <option>2024</option>
              <option>2025</option>
              <option>2026</option>
              <option>2027</option>
              <option>2028</option>
              <option>2029</option>
              <option>2030</option>
            </select>
            <select>
              <option>Any</option>
              <option>Jan</option>
              <option>Feb</option>
              <option>March</option>
              <option>April</option>
              <option>May</option>
              <option>June</option>
              <option>July</option>
              <option>Aug</option>
              <option>Sep</option>
              <option>Oct</option>
              <option>Nov</option>
              <option>Dec</option>
            </select>
            <select>
              <option>Any</option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
              <option>13</option>
              <option>14</option>
              <option>15</option>
              <option>16</option>
              <option>17</option>
              <option>18</option>
              <option>19</option>
              <option>20</option>
              <option>21</option>
              <option>21</option>
              <option>23</option>
              <option>24</option>
              <option>25</option>
              <option>26</option>
              <option>27</option>
              <option>28</option>
              <option>29</option>
              <option>30</option>
              <option>31</option>
            </select>
          </div>
          <div class="search-op l3-o2" style="margin-left: 71px;">
            <label>Start Time:</label>
            <select>
              <option>Any</option>
              <option>12</option>
              <option>11</option>
              <option>10</option>
              <option>9</option>
              <option>8</option>
              <option>7</option>
              <option>6</option>
              <option>5</option>
              <option>4</option>
              <option>3</option>
              <option>2</option>
              <option>1</option>
            </select>
            <select>
              <option></option>
              <option>am</option>
              <option>pm</option>
            </select>
          </div>
          <div class="search-op" style="margin-left: 70px;">
            <label style="margin-right: 16px;">Deadline:</label>
            <select style="width: 86px;">
              <option>Any</option>
              <option>Anytime</option>
              <option>Limit</option>
            </select>
          </div>
          <div class="search-op" style="margin-left: 55px;">
            <label>Privacy:</label>
            <select style="width: 90px;">
              <option>Any</option>
              <option>Public</option>
              <option>Private</option>
            </select>
          </div>
        </div>
        <div class="search-layer l4">
          <div class="search-op l3-o3">
            <label>Age Group:</label>
            <select>
              <option disabled selected>From</option>
              <option>Under 18</option>
              <option>18-30</option>
              <option>30-50</option>
              <option>Above 50</option>
            </select>
            <select>
              <option disabled selected>To</option>
              <option>Under 18</option>
              <option>18-30</option>
              <option>30-50</option>
              <option>Above 50</option>
            </select>
          </div>
          <div class="search-op l3-o3" style="margin-left: 70px;">
            <label>Limit Participants:</label>
            <select>
              <option>Any</option>
              <option>Yes</option>
              <option>No</option>
            </select>
          </div>
          <div class="search-op l3-o3" style="margin-left: 70px;">
            <label style="margin-right: 5px;">Entry Fees:</label>
            <select style="width: 86px">
              <option>Any</option>
              <option>Free</option>
              <option>Payable</option>
            </select>
          </div>
          <div class="search-op l3-o3" style="margin-left: 54px;">
            <label>Gender:</label>
            <select>
              <option>Any</option>
              <option>Male</option>
              <option>Female</option>
              <option>Others</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="search-low col-lg-12">
      <div class="search-low-header">
        <h3>Results - Choose And Join</h3>    
      </div>
      <div class="result-container">
        <div class="result-layer">
        {% for record in filters.qs %}
          <div class="result-box">
            <div class="trip-box">
              <div class="tb-layer layer-zero">
                <div class="tb-title">
                  <label>{{ record.title }}</label>
                </div>
                <div class="tb-credit">
                  <label>By:</label>
                  <a href=""><img src="{% static "img/obama-face.png" %}"></a>
                </div>
              </div>
              <div class="tb-layer" style="padding: 0;">
                <div class="tb-op" style="display: flex;">
                  <img src="{{ MEDIA_URL }}{{ record.logo }}" style=" width: 50%;">
                  <img src="{{ MEDIA_URL }}{{ record.cover }}" style=" width: 50%;">
                </div> 
              </div>
              <div class="tb-layer">
                <div class="tb-op">
                  <label>Type:</label>
                  <span>{{ record.location }}</span>
                </div>
              </div>
              <div class="tb-layer">
                <div class="tb-op" style="flex: 2;">
                  <label>Place:</label>
                  <span title="Daman, Daman & Diu">{{ record.venue_name }}, &nbsp{{ record.street_address }}, &nbsp{{ record.city }}, &nbsp{{ record.state }}, &nbsp{{ record.state }}</span>
                </div>
              </div>
              <div class="tb-layer">
                <div class="tb-op">
                  <label>Activity:</label>
                  <span>{{ record.activity }}, &nbsp{{ record.category }}</span>
                </div>
              </div>
              <div class="tb-layer">
                <div class="tb-op">
                  <label>Date:</label>
                  <span>{{ record.start_date|date:'d M Y' }}</span>
                </div>
              </div>
              <div class="tb-layer">
                <div class="tb-op">
                  <label>Vacancy:</label>
                  <span>11</span>
                </div>
              </div>
              <div class="tb-layer">
                <div class="tb-op">
                  <a id="{{ record.event_id }}" class="dlink" style="cursor: pointer">+More Details</a>
                </div>
              </div>
              <div class="tb-layer join-button">
                <button>Join</button>
              </div>
            </div>
          </div>
        {% endfor %}
	        
      </div>
      
    </div>
  <div id="main_TD">
      {% for record in filters.qs %}
        <div id="{{ record.event_id }}" class="event-details TD" hidden="hidden">
            <div class="trip-box-big"> 
              <div class="tbb-layer tbb-zero">
                <div class="tbb-layer tbb-bck-main">
                <div class="tbb-bck">
                  <img id="left" src="{{ MEDIA_URL }}{{ record.logo }}">
                </div>
              </div>
                <div class="tbb-op tbb-title">
                  <h3><i>{{ record.title }}</i></h3>
                </div>

              </div>
              <div class="tbb-layer tbb-bck-main">
                <div class="tbb-bck">
                  <img id="right" src="{{ MEDIA_URL }}{{ record.cover }}">
                </div>
              </div>
              <div class="tbb-layer">
                
                <div class="tbb-op creator" style="margin-left: 44.5%">
                  <label style="color: black">Created By</label>
                  <img src="{% static "img/user-black.png" %}">
                </div>
              </div>
              <div class="tbb-layer">
                <div class="part" style="margin-left: 20%">
                  <label style="color: black">Participants: 23</label>
                  <div class="tbb-subop">
                    <img src="{% static "img/user-black.png" %}">
                    <img src="{% static "img/user-black.png" %}">
                    <img src="{% static "img/user-black.png" %}">
                    <img src="{% static "img/user-black.png" %}">
                    <img src="{% static "img/user-black.png" %}">
                  </div>
                </div>
              </div>
              <div class="tbb-layer">
                <div class="tbb-op" style="text-align: center; margin-bottom: 20px;">
                  <label style="color: black">Vacancy:
                  <span style="color: black">7</span></label>
                </div>
              </div>
              <div class="tbb-low">
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Place:</label>
                    <span>{{ record.venue_name }},&nbsp {{ record.street_address }},&nbsp {{ record.city }}, &nbsp {{record.state}}- &nbsp {{record.pincode}} </span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Category/Activity:</label>
                    <span>{{ record.category }}, &nbsp {{ record.activity }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Start Date & Time:</label>
                    <span>{{ record.start_date }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>End Date & Time:</label>
                    <span>{{ record.end_date }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Deadline</label>
                    <span>{{ record.deadline }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Gender:</label>
                    <span>{{ record.gender }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Age Group:</label>
                    <span>{{ record.age }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Fees:</label>
                    <span>{{ record.fees }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw">
                  <div class="tbb-op">
                    <label>Description:</label>
                    <span>{{ record.description }}</span>
                  </div>
                </div>
                <div class="tbb-layer lw" style="border: 0;">
                  <div class="tbb-op tbb-route">
                    <label>Route Info: <a href="#!">Click to View</a></label>
                  </div>
                </div>
              </div>
            </div>
        </div>
      {% endfor %}
    </div>
    
  {% endblock content %}

  {% block overlay %}
  
    <div id="olay" class="overlay" hidden="hidden">
      
      <div class="route-details">
        
      </div>
    </div>
  {% endblock overlay %}
   {% block custom_scripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="{% static "js/custom.js" %}"></script>
    <script type="text/javascript">
          var overlay = $( '#olay' )[0];
          var TD = ''
          var id_toFind = ''

          $(".dlink" ).on( 'click', function ( e ) {
              
              link = $(this).attr('id')
              //alert(link)
              id_toFind = "#"+link
              //alert(id_toShow)
              $("#main_TD").find(id_toFind).show()

              $( overlay ).show();
              e.stopPropagation();
              
              
          });

          $( document ).on( 'click', function ( e ) {
              if ( $( e.target ).closest( TD ).length === 0 ) {
                  $( overlay ).hide();
                  $("#main_TD").find(id_toFind).hide()
              }
          });
                          
          $( document ).on( 'keydown', function ( e ) {
              if ( e.keyCode === 27 ) {
                  $( overlay ).hide();
                  $("#main_TD").find(id_toFind).hide()
              }
          });
    </script>
  {% endblock custom_scripts %}