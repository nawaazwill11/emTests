{% extends 'frame.html' %}
{% load staticfiles %}

  {% block title %}Welcome To Endless Miles{% endblock title %}
  {% block static_files %}
	  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='
	  text/css'>
		<link rel="stylesheet" href="{% static "css/custom/index-style.css" %}">
	{% endblock static_files %}

	{% block page_name %}Endless Miles{% endblock page_name %}


	{% block top_nav_user_info %}{% endblock top_nav_user_info %}
"
	{% block top_nav_extras %}
		<div class="main-nav">
			<ul>
				<!-- inser more links here -->
				<li><a class="cd-signin" href="#0">Sign in</a></li>
				<li><a class="cd-signup" href="#0">Sign up</a></li>
			</ul>	
		</div>
		
	{% endblock top_nav_extras %}
	{% block right_side_nav %}{% endblock right_side_nav %}
	{% block content %}
		<div class="cd-user-modal"> <!-- this is the entire modal form, including the background -->
			<div class="cd-user-modal-container"> <!-- this is the container wrapper -->
				<ul class="cd-switcher" type="none">
					<li><a href="#0">Sign in</a></li>
					<li><a href="#0">New account</a></li>
				</ul>

				<div id="cd-login"> <!-- log in form -->
					<form id="form_login" method="POST" class="cd-form">
						{% csrf_token %}
						<p class="fieldset">
							<label class="image-replace cd-email" for="signin-username">E-mail</label>
							{{form.username}}
							<span id="username-error" class="cd-error-message">{{form.username.error}}</span>
						</p>

						<p class="fieldset">
							<label class="image-replace cd-password" for="signin-password">Password</label>
							{{form.password}}
							<a href="#0" class="hide-password">Show</a>
							<span id="credential-error" class="alert alter-danger"></span>
						</p>

						<p class="fieldset">
							<input type="checkbox" id="remember-me" checked>
							<label for="remember-me">Remember me</label>
						</p>

						<p class="fieldset">
							<input id="trial" class="full-width" type="submit" value="Login">
						</p>
					</form>
					<p class="cd-form-bottom-message"><a href="#0">Forgot your password?</a></p>
					<!-- <a href="#0" class="cd-close-form">Close</a> -->
				</div> <!-- cd-login -->

				<div id="cd-signup"> <!-- sign up form -->
					<form id="form_registration" class="cd-form">
						<p class="fieldset">
							<label class="image-replace cd-username" for="signup-username">Username</label>
							<input class="full-width has-padding has-border" id="signup-username" type="text" placeholder="Username">
							<span class="cd-error-message">Error message here!</span>
						</p>

						<p class="fieldset">
							<label class="image-replace cd-email" for="signup-email">E-mail</label>
							<input class="full-width has-padding has-border" id="signup-email" type="email" placeholder="E-mail">
							<span class="cd-error-message">Error message here!</span>
						</p>

						<p class="fieldset">
							<label class="image-replace cd-password" for="signup-password">Password</label>
							<input class="full-width has-padding has-border" id="signup-password" type="text"  placeholder="Password">
							<a href="#0" class="hide-password">Show</a>
							<span class="cd-error-message">Error message here!</span>
						</p>

						<p class="fieldset">
							<input type="checkbox" id="accept-terms">
							<label for="accept-terms">I agree to the <a href="#0" class="terms">Terms</a></label>
						</p>

						<p class="fieldset">
							<input class="full-width has-padding" type="submit" value="Create account">
						</p>
					</form>

					<!-- <a href="#0" class="cd-close-form">Close</a> -->
				</div> <!-- cd-signup -->

				<div id="cd-reset-password"> <!-- reset password form -->
					<p class="cd-form-message">Lost your password? Please enter your email address. You will receive a link to create a new password.</p>

					<form class="cd-form">
						<p class="fieldset">
							<label class="image-replace cd-email" for="reset-email">E-mail</label>
							<input class="full-width has-padding has-border" id="reset-email" type="email" placeholder="E-mail">
							<span class="cd-error-message">Error message here!</span>
						</p>

						<p class="fieldset">
							<input class="full-width has-padding" type="submit" value="Reset password">
						</p>
					</form>

					<p class="cd-form-bottom-message"><a href="#0">Back to log-in</a></p>
				</div> <!-- cd-reset-password -->
				<a href="#0" class="cd-close-form">Close</a>
			</div> <!-- cd-user-modal-container -->
		</div> <!-- cd-user-modal -->
	{% endblock content %}

	{% block custom_scripts %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script  src="{% static "js/index.js" %}"></script>
    <script>
		$(document).ready(function() {
		    $("#trial").click(function(){
				  $.ajax({
				    type: 'POST', 
				    url: '#', 
				    dataType: 'json',
				    data: $('#form_login').serialize(),
				    success: function (x) {                
				      $("#credential-error").html("Login Success");
				      var delay = 1000; 
				      redirect_url = x.url
				      //alert("Welcome to Endless Miles. Happy Travelling!");
				      setTimeout(function(){ window.location = redirect_url; }, delay);
				    },
				    beforeSend:function(){
				      $("#credential-error").html("Invalid Credentials");
				    }
			  	});
			  return false;
			});
		})
    </script>
  {% endblock custom_scripts %}


</body>

</html>
