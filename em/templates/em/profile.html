{% extends 'frame.html' %}
{% load staticfiles %}

    
    {% block title %}{% endblock title %}
    
    {% block static_files %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/custom/profile.css' %} ">
    {% block sub_sf%}{% endblock sub_sf%}
    {% endblock static_files %}

        {% block page_name %}{% endblock page_name %}                        
            {% block inner_rightSideBar %}
            <li><a href="{% url "timeline" %}"><span><i class="material-icons">timeline</i></span>Timeline</a></li>
            <li><a href="{% url "about" %}"><span><i class="material-icons">info_outline</i></span>About</a></li>
            <li><a href="{% url "album" %}"><span><i class="material-icons">photo_album</i></span>Album</a></li>
            <li><a href="{% url "friends" %}"><span><i class="material-icons">supervisor_account</i></span>Friends</a></li>
            <li><a href="{% url "profilesetting" %}"><span><i class="material-icons">tune</i></span>Settings</a></li>
            {% endblock inner_rightSideBar %}
            
            {% block outer_rightSideBar %}
            <li style="margin-bottom: 35px;"><a href="{% url "timeline" %}"><span data-toggle="tooltip" data-placement="top" data-original-title="Timeline"><i id="mat-icon" class="material-icons">timeline</i></span></a></li>
            <li><a href="{% url "about" %}"><span data-toggle="tooltip" data-placement="top" data-original-title="About"><i id="mat-icon" class="material-icons">info_outline</i></span></a></li>
            <li style="margin-top: 20px"><a href="{% url "album" %}"><span data-toggle="tooltip" data-placement="top" data-original-title="Album"><i id="mat-icon" class="material-icons">photo_album</i></span></a></li>
            <li><a href="{% url "friends" %}"><span data-toggle="tooltip" data-placement="top" data-original-title="Friends"><i id="mat-icon" class="material-icons">supervisor_account</i></span></a></li>
            <li><a href="{% url "profilesetting" %}"><span data-toggle="tooltip" data-placement="top" data-original-title="Friends"><i id="mat-icon" class="material-icons">tune</i></span></a></li>
            {% endblock outer_rightSideBar %}
        
{% block content %}
  <div class="root">
        <div class="root-content">
          <div class="cover">
            <img src="{{ MEDIA_URL }}{{ coverp }}">
          </div>
          <div class="sunglass">
            <div class="rowlo">
              <div class="strap col-lg-5">
                <ul type="none">
                  <li><a href="{% url "timeline" %}">Timeline</a></li>
                  <li><a href="{% url "about" %}">About</a></li>
                  <li><a href="{% url "album" %}">Album</a></li>
                </ul>
              </div>
              <div class="strap col-lg-offset-2 col-lg-5">
                <ul type="none">
                  <li><a href="{% url "friends" %}">Friends</a></li>
                  <li><a href="{% url "profilesetting" %}">Settings</a></li>
                </ul>
              </div>
            </div>  
          </div>
          <div class="author-onNose">
            <div class="author-content">
              <div class="onNose-photo">
                <a href="#">
                    <img class="round-ppic" src="{{ MEDIA_URL }}{{ profilep }}">
                </a>
              </div>
              <div class="author-name">
                <a href="{% url "about" %}">Willo Walker</a>
              </div>
            </div>
          </div>
          <div class="root-content-edit">
            <div class="dropup">
              <button class="dropdown-toggle" type="button" id="photo-edit" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="glyphicon glyphicon-cog"></span>
              </button>
              <ul id="root-content-set" class="dropdown-menu" aria-labelledby="photo-edit">
                <li><a id="profileedit" href="#" onclick="letupload(this.id)">Update Profile Picture</a></li>
                <li><a id="coveredit" href="#" onclick="letupload(this.id)">Update Cover Photo</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#">Remove Profile Photo</a></li>
                <li><a href="#">Remove Cover Photo</a></li>
              </ul>
          </div>
          </div>
        </div>
      <form id="propic_form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div id="upload-overlay-photo" class="upload-overlay" class="testpicupload" hidden="hidden">
          <label>Mast mast profile</label>
          {{ imgform.profilepic }}
          <input type="submit" name="ProfileUpload">
        </div>
      <form id="cover_form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div id="upload-overlay-cover" class="upload-overlay" class="testpicupload" hidden="hidden">
          <label>Mast mast cover</label>
          {{ imgform.coverpic }}
          <input type="submit" name="CoverUpload">
        </div>
    </form>
  </div>

{% block boot %}{% endblock boot %}
{% endblock content %}

{% block overlay %}
<div class="album-overlay" id="olay" hidden="hidden">
    </div>
{% endblock overlay %}

{% block custom_scripts %}
<script type="text/javascript">
function letupload(link){
          if (link == "coveredit"){
            var link = $( '#coveredit' )[0];
            var overlay = $( '#olay' )[0];
            var TD = $( '#upload-overlay-cover' )[0];
          }
          else if (link == "profileedit"){
            var link = $( '#profileedit' )[0];
            var overlay = $( '#olay' )[0];
            var TD = $( '#upload-overlay-photo')[0]; 
          }
          $( link ).on( 'click', function ( e ) {
              $( overlay ).show();
              $( TD ).show();
              e.stopPropagation();
          });

          $( document ).on( 'click', function ( e ) {
              if ( $( e.target ).closest( TD ).length === 0 ) {
                  $( overlay ).hide();
                  $( TD ).hide();
              }
          });
                          
          $( document ).on( 'keydown', function ( e ) {
              if ( e.keyCode === 27 ) {
                  $( overlay ).hide();
                  $( TD ).hide();
              }
          });
        }
    </script>
{% endblock custom_scripts %}
